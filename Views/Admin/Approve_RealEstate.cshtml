@model IEnumerable<Website_BDS.Models.Product>

@{
    ViewBag.Title = "Duyệt bài đăng";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<link rel="stylesheet" href="@Url.Content("~/Font-end/CSS/CSS_Admin/Style_List-RealEstate.css")" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

<body>
    <div class="header">
        <h2>Duyệt bài viết <span style="font-size:14px; color:#c2410c;">(Đang chờ: @Model.Count())</span></h2>
    </div>

    <div class="list">
        @if (Model.Any())
        {
            foreach (var item in Model)
            {
                <div class="card" style="border: 1px solid #f97316;">
                    <div style="position: relative;">
                        @{
                            var imgUrl = item.PropertyImages.FirstOrDefault(x => x.IsPrimary == true)?.ImageUrl ?? "/Content/Images/default-house.jpg";
                        }
                        <img src="@imgUrl" style="width:100%; height:180px; object-fit:cover; border-radius: 8px 8px 0 0;" />

                        <div class="status" style="background:#ffedd5; color:#c2410c; font-weight:bold;">
                            <i class="fa-regular fa-clock"></i> Chờ duyệt
                        </div>
                    </div>

                    <div class="card-body">
                        <div class="title">@item.Title</div>
                        <div class="location">📍 @item.District, @item.City</div>
                        <div class="info">
                            <div><i class="fa-solid fa-bed"></i> @item.Bedrooms</div>
                            <div><i class="fa-solid fa-bath"></i> @item.Bathrooms</div>
                            <div><i class="fa-solid fa-ruler-combined"></i> @(item.Area)m²</div>
                        </div>
                        <div class="price" style="color:#d32f2f">
                            @((item.Price ?? 0).ToString("N0")) VNĐ
                        </div>
                        <div style="font-size:12px; color:#666; margin-top:5px;">
                            Người đăng: <b>@(item.User != null ? item.User.FullName : "Ẩn danh")</b>
                        </div>
                    </div>

                    <div class="card-footer" style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; padding:10px;">

                        <a href="@Url.Action("Confirm_Approve", new { id = item.ProductID })"
                           class="btn-approve"
                           style="background:#22c55e; color:white; text-align:center; padding:8px; border-radius:5px; text-decoration:none; font-weight:bold;">
                            <i class="fa-solid fa-check"></i> Duyệt
                        </a>

                        <a href="@Url.Action("Confirm_Reject", new { id = item.ProductID })"
                           class="btn-reject"
                           onclick="return confirm('Bạn chắc chắn muốn từ chối bài này?');"
                           style="background:#ef4444; color:white; text-align:center; padding:8px; border-radius:5px; text-decoration:none; font-weight:bold;">
                            <i class="fa-solid fa-xmark"></i> Xóa
                        </a>

                    </div>
                </div>
            }
        }
        else
        {
            <div style="grid-column: 1/-1; text-align:center; padding:50px;">
                <i class="fa-solid fa-clipboard-check" style="font-size:50px; color:#22c55e; margin-bottom:15px;"></i>
                <p>Tuyệt vời! Không có bài đăng nào đang chờ duyệt.</p>
            </div>
        }
    </div>
</body>