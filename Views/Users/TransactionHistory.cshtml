@model Website_BDS.Models.ViewModel.UserProfileViewModel

@*@{
    ViewBag.Title = "Lịch sử giao dịch";
    Layout = "~/Views/Shared/_LayoutPageUser.cshtml";
}*@

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<link rel="stylesheet" href="@Url.Content("~/Font-end/asset/reset.css")" />
<link rel="stylesheet" href="@Url.Content("~/Font-end/asset/base.css")" />
<link rel="stylesheet" href="@Url.Content("~/Font-end/CSS/edit-page_user.css")" />

<div class="main">

    <div class="content-left" style="flex: 1; margin-right: 20px;">
        <div class="transaction-container" style="background:white; padding:30px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.05);">
            <h2 style="margin-bottom:20px; font-size:24px; font-weight:bold; color:#333;">Lịch sử giao dịch</h2>

            @if (Model.Transactions != null && Model.Transactions.Any())
            {
                <table class="table" style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background:#f8f9fa; border-bottom:2px solid #eee;">
                            <th style="padding:15px; text-align:left;">Mã GD</th>
                            <th style="padding:15px; text-align:left;">Thời gian</th>
                            <th style="padding:15px; text-align:left;">Nội dung</th>
                            <th style="padding:15px; text-align:right;">Số tiền</th>
                            <th style="padding:15px; text-align:center;">Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.Transactions)
                        {
                            <tr style="border-bottom:1px solid #eee;">
                                <td style="padding:15px; font-weight:bold; color:#666;">@item.TransactionCode</td>
                                <td style="padding:15px;">@item.CreatedAt.Value.ToString("dd/MM/yyyy HH:mm")</td>
                                <td style="padding:15px;">@item.Description</td>
                                <td style="padding:15px; text-align:right; font-weight:bold; color: @(item.Type == "Deposit" ? "#16a34a" : "#dc2626");">
                                    @(item.Type == "Deposit" ? "+" : "-") @string.Format("{0:N0} đ", item.Amount)
                                </td>
                                <td style="padding:15px; text-align:center;">
                                    @if (item.Status == "Success")
                                    {<span style="background:#dcfce7; color:#166534; padding:5px 10px; border-radius:15px; font-size:12px; font-weight:bold;">Thành công</span> }
                                    else if (item.Status == "Pending")
                                    { <span style="background:#ffedd5; color:#9a3412; padding:5px 10px; border-radius:15px; font-size:12px; font-weight:bold;">Đang xử lý</span> }
                                    else
                                    { <span style="background:#fee2e2; color:#991b1b; padding:5px 10px; border-radius:15px; font-size:12px; font-weight:bold;">Thất bại</span>}
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <div style="text-align:center; padding:50px; color:#999;">
                    <i class="fa-solid fa-clock-rotate-left" style="font-size:40px; margin-bottom:15px;"></i>
                    <p>Bạn chưa có giao dịch nào.</p>
                    <a href="javascript:void(0)" class="Button_Blue open-deposit-modal"
                       style="display:inline-block; margin-top:10px; text-decoration:none; color:white; padding:10px 20px; background:#007bff; border-radius:5px;"
                       data-url="@Url.Action("DepositPartial", "Users", new { id = Model.User.UserID })">
                        Nạp tiền ngay
                    </a>
                </div>
            }
        </div>
    </div>

   