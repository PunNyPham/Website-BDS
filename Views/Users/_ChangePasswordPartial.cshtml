
<div class="profile-card-container" style="padding: 30px;">
    <h3 class="section-title" style="text-align:left; border-bottom:1px solid #eee; padding-bottom:10px;">
        Đổi mật khẩu
    </h3>

    <form id="changePassForm">
        <div class="form-group" style="margin-bottom:15px;">
            <label style="font-weight:bold; display:block; margin-bottom:5px;">Mật khẩu hiện tại</label>
            <input type="password" name="currentPass" class="form-control" placeholder="Nhập mật khẩu cũ..." style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
        </div>

        <div class="form-group" style="margin-bottom:15px;">
            <label style="font-weight:bold; display:block; margin-bottom:5px;">Mật khẩu mới</label>
            <input type="password" name="newPass" class="form-control" placeholder="Nhập mật khẩu mới..." style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
        </div>

        <div class="form-group" style="margin-bottom:20px;">
            <label style="font-weight:bold; display:block; margin-bottom:5px;">Xác nhận mật khẩu mới</label>
            <input type="password" name="confirmPass" class="form-control" placeholder="Nhập lại mật khẩu mới..." style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
        </div>

        <button type="button" onclick="submitChangePassAjax()" class="Button_Blue" style="width:auto; padding:10px 30px; cursor:pointer;">
            Lưu thay đổi
        </button>
    </form>
</div>

<script>
    // Hàm xử lý gửi form đổi mật khẩu (Nằm riêng trong Partial này)
    function submitChangePassAjax() {
        var formData = $('#changePassForm').serialize(); // Lấy dữ liệu input

        $.ajax({
            url: '/Users/ChangePassword', // Gọi về Controller
            type: 'POST',
            data: formData,
            success: function (res) {
                if (res.success) {
                    alert(res.message);
                    // Reset form sau khi thành công
                    $('#changePassForm')[0].reset();
                } else {
                    alert(res.message);
                }
            },
            error: function () {
                alert("Lỗi kết nối server!");
            }
        });
    }
</script>